########################################
# Application
########################################
spring:
  application:
    name: prodwebapp

  # 콘솔에 ANSI 컬러 항상 사용
  output:
    ansi:
      enabled: always

  ########################################
  # Encoding
  ########################################
  servlet:
    encoding:
      charset: UTF-8
      enabled: true
      force: true

  ########################################
  # SQL Init
  ########################################
  sql:
    init:
      mode: never                           # SQL 초기화 스크립트 실행 안 함
      continue-on-error: true               # 초기화 에러 시 계속 진행

  ########################################
  # Redis
  ########################################
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 2000ms
      connect-timeout: 5000ms

  ########################################
  # Error Handling
  ########################################
  web:
    error:
      include-message: always
      include-binding-errors: always
      include-stacktrace: on_param

  ########################################
  # Profile
  ########################################
  profiles:
    active: dev                             # 기본 프로파일: dev (개발 환경)

########################################
# Server
########################################
server:
  port: 8080

########################################
# Logging
########################################
logging:
  level:
    root: INFO
    "[com.cinema]": DEBUG
    "[org.springframework]": INFO
    "[org.springframework.web]": DEBUG
    "[org.hibernate.SQL]": DEBUG
    "[org.hibernate.orm.jdbc.bind]": TRACE

########################################
# JWT
########################################
jwt:
  secret: dGhpc2lzYXZlcnlsb25nc2VjcmV0a2V5Zm9yamF2YXdlYnRva2Vuc2lnbmluZ3B1cnBvc2Vz
  access-token-expire-time: 900000     # 15분 (밀리초) - RULE: Access Token ≤ 15분
  refresh-token-expire-time: 604800000 # 7일 (밀리초)

########################################
# CORS
########################################
cors:
  allowed-origins: "*"                 # 개발 환경: 모든 origin 허용 (운영 시 특정 도메인으로 변경)
  max-age: 3600                        # Preflight 요청 캐시 시간 (초)

########################################
# Seat HOLD
########################################
seat:
  hold:
    ttl-minutes: 7                     # HOLD TTL (5~10분 권장)
    max-seats-per-user: 4              # 사용자당 최대 선택 가능 좌석 수

########################################
# Redisson (분산 락)
########################################
redisson:
  single-server-config:
    address: redis://localhost:6379
    connection-minimum-idle-size: 5
    connection-pool-size: 10
    idle-connection-timeout: 10000
    connect-timeout: 5000
    timeout: 3000
    retry-attempts: 3
    retry-interval: 1500
